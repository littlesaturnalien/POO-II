{"ast":null,"code":"var _jsxFileName = \"/Users/karen_fonseca/Documents/UAM/POO II/Proyecto I Corte - Frontend/ICorte_POO_Project/carnet-uam-frontend/src/pages/admin/StudentIDCard.jsx\",\n  _s = $RefreshSig$();\n// src/pages/admin/StudentIdCardPage.jsx\nimport React, { useEffect, useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport axios from 'axios';\nimport AdminLayout from '../../layouts/AdminLayout';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API = 'http://localhost:8087/uam-carnet-sys';\nconst STATUS_OPTS = ['PENDING', 'APPROVED', 'REJECTED', 'DELIVERED', 'EMITTED'];\n\n/* helpers fecha */\nconst toISODate = d => {\n  if (!d) return '';\n  const iso = d.match(/^\\d{4}[-/]\\d{2}[-/]\\d{2}/);\n  if (iso) return iso[0].replace(/\\//g, '-');\n  const dm = d.match(/^(\\d{2})[-/](\\d{2})[-/](\\d{4})/);\n  return dm ? `${dm[3]}-${dm[2]}-${dm[1]}` : '';\n};\nconst b2iso = s => s ? `${s.slice(6, 10)}-${s.slice(3, 5)}-${s.slice(0, 2)}T${s.slice(11)}` : '';\nconst iso2b = s => s ? `${s.slice(8, 10)}-${s.slice(5, 7)}-${s.slice(0, 4)} ${s.slice(11)}` : '';\nexport default function StudentIdCardPage() {\n  _s();\n  const {\n    cif\n  } = useParams();\n  const [cards, setCards] = useState([]);\n  const [reqs, setReqs] = useState([]);\n  const [stu, setStu] = useState([]);\n  const [edit, setEdit] = useState({});\n  const [open, setOpen] = useState(null);\n\n  /* cargar */\n  const load = async () => {\n    const [cRes, rRes, sRes] = await Promise.all([axios.get(`${API}/idcard`), axios.get(`${API}/requirement`), axios.get(`${API}/student`)]);\n    const c = cRes.data.filter(i => i.cif === cif);\n    const r = rRes.data.filter(i => i.cif === cif);\n    setCards(c);\n    setReqs(r);\n    setStu(sRes.data.filter(s => s.cif === cif));\n    const st = {};\n    c.forEach(cd => {\n      const req = r.find(q => q.requirementId === cd.requirement_id);\n      st[cd.idCardId] = {\n        status: cd.status,\n        notes: cd.notes || '',\n        issueDate: toISODate(cd.issueDate),\n        // yyyy‑MM‑dd\n        deliveryAppointment: b2iso(cd.deliveryAppointment),\n        pictureId: cd.picture_id,\n        pictureUrl: cd.picture_url || '',\n        photoAppointment: b2iso(cd.photoAppointment),\n        requirementId: req === null || req === void 0 ? void 0 : req.requirementId,\n        paymentProofUrl: (req === null || req === void 0 ? void 0 : req.paymentProofUrl) || ''\n      };\n    });\n    setEdit(st);\n  };\n  useEffect(() => {\n    load();\n  }, [cif]);\n  const keepOpen = i => setOpen(i);\n\n  /* guardar carnet */\n  const saveCard = async (cd, idx) => {\n    const e = edit[cd.idCardId];\n    try {\n      const dates = {};\n      if (e.issueDate && e.issueDate !== toISODate(cd.issueDate)) dates.issueDate = e.issueDate; // ISO\n      if (e.deliveryAppointment && iso2b(e.deliveryAppointment) !== cd.deliveryAppointment) dates.deliveryAppointment = iso2b(e.deliveryAppointment);\n      if (Object.keys(dates).length) await axios.patch(`${API}/idcard/${cd.idCardId}/dates`, dates);\n      if (e.status !== cd.status) await axios.patch(`${API}/idcard/${cd.idCardId}/status`, {\n        status: e.status\n      });\n      const note = (e.notes || '').trim();\n      if (note && note !== (cd.notes || '').trim()) await axios.patch(`${API}/idcard/${cd.idCardId}/addNotes`, {\n        notes: note\n      });\n      alert('✅ Carnet actualizado');\n      await load();\n      keepOpen(idx);\n    } catch (err) {\n      console.error(err);\n      alert('❌ Error al guardar carnet');\n    }\n  };\n\n  /* guardar foto */\n  const savePic = async (cd, idx) => {\n    const e = edit[cd.idCardId];\n    if (!e.requirementId) {\n      return alert('requirementId faltante');\n    }\n    try {\n      var _reqRes$data$data;\n      // 1. Obtener el requirement para extraer pictureId\n      const reqRes = await axios.get(`${API}/requirement/${e.requirementId}`);\n      const reqObj = (_reqRes$data$data = reqRes.data.data) !== null && _reqRes$data$data !== void 0 ? _reqRes$data$data : reqRes.data;\n      const picId = reqObj.pictureId;\n      if (!picId) {\n        return alert('pictureId no encontrado en el requirement');\n      }\n\n      // 2. Hacer PUT con el pictureId correcto\n      await axios.put(`${API}/picture/${picId}`, {\n        ...(e.photoAppointment && {\n          photoAppointment: iso2b(e.photoAppointment)\n        }),\n        cif: cd.cif,\n        photoUrl: e.pictureUrl\n      });\n      alert('✅ Foto guardada');\n      await load();\n      keepOpen(idx);\n    } catch (err) {\n      console.error(err);\n      alert('❌ Error al guardar foto');\n    }\n  };\n\n  /* guardar comprobante */\n  const saveReq = async (cd, idx) => {\n    const e = edit[cd.idCardId];\n    if (!e.requirementId) return alert('requirementId faltante');\n    try {\n      await axios.put(`${API}/requirement/${e.requirementId}`, {\n        paymentProofUrl: e.paymentProofUrl\n      });\n      alert('✅ Comprobante guardado');\n      await load();\n      keepOpen(idx);\n    } catch (err) {\n      console.error(err);\n      alert('❌ Error al guardar comprobante');\n    }\n  };\n  const studentName = stu.length ? `${stu[0].names} ${stu[0].surnames}` : '';\n  return /*#__PURE__*/_jsxDEV(AdminLayout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-4xl mx-auto mt-10 p-6 bg-white rounded shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold mb-4\",\n        children: [\"Solicitudes de Carnet de \", studentName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/admin/students\",\n        className: \"text-blue-600 underline mb-6 block\",\n        children: \"\\u2190 Volver a Estudiantes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), !cards.length && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500\",\n        children: \"No hay solicitudes.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 33\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4 max-h-[70vh] overflow-y-auto pr-2\",\n        children: cards.map((c, i) => {\n          const e = edit[c.idCardId] || {};\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setOpen(open === i ? null : i),\n              className: \"w-full p-4 bg-gray-100 flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: [\"Semestre \", c.semester, \" \", c.year, \" \\u2014 \", c.status]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: open === i ? '−' : '+'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 33\n            }, this), open === i && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 space-y-5 bg-white rounded-b-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"section\", {\n                className: \"space-y-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-lg font-medium\",\n                  children: \"Carnet\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-2 items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"w-44 font-semibold\",\n                    children: \"Estado\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: e.status,\n                    onChange: ev => setEdit({\n                      ...edit,\n                      [c.idCardId]: {\n                        ...e,\n                        status: ev.target.value\n                      }\n                    }),\n                    className: \"border px-2 py-1 rounded\",\n                    children: STATUS_OPTS.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n                      children: s\n                    }, s, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 163,\n                      columnNumber: 73\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-2 items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"w-44 font-semibold\",\n                    children: \"Emisi\\xF3n\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"date\",\n                    className: \"border px-2 py-1 rounded\",\n                    value: e.issueDate,\n                    onChange: ev => setEdit({\n                      ...edit,\n                      [c.idCardId]: {\n                        ...e,\n                        issueDate: ev.target.value\n                      }\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-2 items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"w-44 font-semibold\",\n                    children: \"Entrega\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 173,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"datetime-local\",\n                    className: \"border px-2 py-1 rounded\",\n                    value: e.deliveryAppointment,\n                    onChange: ev => setEdit({\n                      ...edit,\n                      [c.idCardId]: {\n                        ...e,\n                        deliveryAppointment: ev.target.value\n                      }\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-2 items-start\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"w-44 font-semibold mt-1\",\n                    children: \"Notas\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    rows: 3,\n                    className: \"border px-2 py-1 rounded w-full\",\n                    value: e.notes,\n                    onChange: ev => setEdit({\n                      ...edit,\n                      [c.idCardId]: {\n                        ...e,\n                        notes: ev.target.value\n                      }\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => saveCard(c, i),\n                  className: \"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700\",\n                  children: \"Guardar Carnet\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n                className: \"space-y-2 pt-4 border-t\",\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-lg font-medium\",\n                  children: \"Fotograf\\xEDa\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-2 items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"w-44 font-semibold\",\n                    children: \"URL\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"url\",\n                    className: \"border px-2 py-1 rounded w-full\",\n                    value: e.pictureUrl,\n                    onChange: ev => setEdit({\n                      ...edit,\n                      [c.idCardId]: {\n                        ...e,\n                        pictureUrl: ev.target.value\n                      }\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-2 items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"w-44 font-semibold\",\n                    children: \"Cita Foto\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"datetime-local\",\n                    className: \"border px-2 py-1 rounded\",\n                    value: e.photoAppointment,\n                    onChange: ev => setEdit({\n                      ...edit,\n                      [c.idCardId]: {\n                        ...e,\n                        photoAppointment: ev.target.value\n                      }\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 201,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => savePic(c, i),\n                  className: \"bg-indigo-600 text-white px-3 py-1 rounded hover:bg-indigo-700\",\n                  children: \"Guardar Foto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 45\n                }, this), e.pictureUrl && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1\",\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: e.pictureUrl,\n                    target: \"_blank\",\n                    rel: \"noreferrer\",\n                    className: \"text-blue-600 underline\",\n                    children: \"Ver foto actual\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n                className: \"space-y-2 pt-4 border-t\",\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-lg font-medium\",\n                  children: \"Comprobante de Pago\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-2 items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"w-44 font-semibold\",\n                    children: \"URL\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 221,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"url\",\n                    className: \"border px-2 py-1 rounded w-full\",\n                    value: e.paymentProofUrl,\n                    onChange: ev => setEdit({\n                      ...edit,\n                      [c.idCardId]: {\n                        ...e,\n                        paymentProofUrl: ev.target.value\n                      }\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => saveReq(c, i),\n                  className: \"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700\",\n                  children: \"Guardar Comprobante\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 45\n                }, this), e.paymentProofUrl && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1\",\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: e.paymentProofUrl,\n                    target: \"_blank\",\n                    rel: \"noreferrer\",\n                    className: \"text-blue-600 underline\",\n                    children: \"Ver comprobante actual\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 232,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 37\n            }, this)]\n          }, c.idCardId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 9\n  }, this);\n}\n_s(StudentIdCardPage, \"/eTBVmprjyBA04WApJLz3KywoLU=\", false, function () {\n  return [useParams];\n});\n_c = StudentIdCardPage;\nvar _c;\n$RefreshReg$(_c, \"StudentIdCardPage\");","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","axios","AdminLayout","jsxDEV","_jsxDEV","API","STATUS_OPTS","toISODate","d","iso","match","replace","dm","b2iso","s","slice","iso2b","StudentIdCardPage","_s","cif","cards","setCards","reqs","setReqs","stu","setStu","edit","setEdit","open","setOpen","load","cRes","rRes","sRes","Promise","all","get","c","data","filter","i","r","st","forEach","cd","req","find","q","requirementId","requirement_id","idCardId","status","notes","issueDate","deliveryAppointment","pictureId","picture_id","pictureUrl","picture_url","photoAppointment","paymentProofUrl","keepOpen","saveCard","idx","e","dates","Object","keys","length","patch","note","trim","alert","err","console","error","savePic","_reqRes$data$data","reqRes","reqObj","picId","put","photoUrl","saveReq","studentName","names","surnames","children","className","fileName","_jsxFileName","lineNumber","columnNumber","to","map","onClick","semester","year","value","onChange","ev","target","type","rows","href","rel","_c","$RefreshReg$"],"sources":["/Users/karen_fonseca/Documents/UAM/POO II/Proyecto I Corte - Frontend/ICorte_POO_Project/carnet-uam-frontend/src/pages/admin/StudentIDCard.jsx"],"sourcesContent":["// src/pages/admin/StudentIdCardPage.jsx\nimport React, { useEffect, useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport axios from 'axios';\nimport AdminLayout from '../../layouts/AdminLayout';\n\nconst API = 'http://localhost:8087/uam-carnet-sys';\nconst STATUS_OPTS = ['PENDING','APPROVED','REJECTED','DELIVERED','EMITTED'];\n\n/* helpers fecha */\nconst toISODate = d=>{\n    if(!d) return '';\n    const iso=d.match(/^\\d{4}[-/]\\d{2}[-/]\\d{2}/);\n    if(iso) return iso[0].replace(/\\//g,'-');\n    const dm=d.match(/^(\\d{2})[-/](\\d{2})[-/](\\d{4})/);\n    return dm?`${dm[3]}-${dm[2]}-${dm[1]}`:'';\n};\nconst b2iso=s=>s?`${s.slice(6,10)}-${s.slice(3,5)}-${s.slice(0,2)}T${s.slice(11)}`:'';\nconst iso2b=s=>s?`${s.slice(8,10)}-${s.slice(5,7)}-${s.slice(0,4)} ${s.slice(11)}`:'';\n\nexport default function StudentIdCardPage(){\n    const { cif } = useParams();\n    const [cards,setCards]=useState([]); const [reqs,setReqs]=useState([]);\n    const [stu,setStu]=useState([]);    const [edit,setEdit]=useState({});\n    const [open,setOpen]=useState(null);\n\n    /* cargar */\n    const load=async()=>{\n        const [cRes,rRes,sRes]=await Promise.all([\n            axios.get(`${API}/idcard`),\n            axios.get(`${API}/requirement`),\n            axios.get(`${API}/student`)\n        ]);\n        const c=cRes.data.filter(i=>i.cif===cif);\n        const r=rRes.data.filter(i=>i.cif===cif);\n        setCards(c); setReqs(r); setStu(sRes.data.filter(s=>s.cif===cif));\n\n        const st={};\n        c.forEach(cd=>{\n            const req=r.find(q=>q.requirementId===cd.requirement_id);\n            st[cd.idCardId]={\n                status:cd.status,\n                notes: cd.notes||'',\n                issueDate: toISODate(cd.issueDate),          // yyyy‑MM‑dd\n                deliveryAppointment: b2iso(cd.deliveryAppointment),\n                pictureId: cd.picture_id,\n                pictureUrl: cd.picture_url||'',\n                photoAppointment: b2iso(cd.photoAppointment),\n                requirementId: req?.requirementId,\n                paymentProofUrl: req?.paymentProofUrl||'',\n            };\n        });\n        setEdit(st);\n    };\n    useEffect(()=>{load();},[cif]);\n\n    const keepOpen=i=>setOpen(i);\n\n    /* guardar carnet */\n    const saveCard=async(cd,idx)=>{\n        const e=edit[cd.idCardId];\n        try{\n            const dates={};\n            if(e.issueDate && e.issueDate!==toISODate(cd.issueDate))\n                dates.issueDate=e.issueDate;                        // ISO\n            if(e.deliveryAppointment &&\n                iso2b(e.deliveryAppointment)!==cd.deliveryAppointment)\n                dates.deliveryAppointment=iso2b(e.deliveryAppointment);\n            if(Object.keys(dates).length)\n                await axios.patch(`${API}/idcard/${cd.idCardId}/dates`,dates);\n\n            if(e.status!==cd.status)\n                await axios.patch(`${API}/idcard/${cd.idCardId}/status`,{status:e.status});\n\n            const note=(e.notes||'').trim();\n            if(note && note!== (cd.notes||'').trim())\n                await axios.patch(`${API}/idcard/${cd.idCardId}/addNotes`,{notes:note});\n\n            alert('✅ Carnet actualizado');\n            await load(); keepOpen(idx);\n        }catch(err){console.error(err);alert('❌ Error al guardar carnet');}\n    };\n\n    /* guardar foto */\n    const savePic = async (cd, idx) => {\n        const e = edit[cd.idCardId];\n        if (!e.requirementId) {\n            return alert('requirementId faltante');\n        }\n        try {\n            // 1. Obtener el requirement para extraer pictureId\n            const reqRes = await axios.get(`${API}/requirement/${e.requirementId}`);\n            const reqObj = reqRes.data.data ?? reqRes.data;\n            const picId  = reqObj.pictureId;\n            if (!picId) {\n                return alert('pictureId no encontrado en el requirement');\n            }\n\n            // 2. Hacer PUT con el pictureId correcto\n            await axios.put(`${API}/picture/${picId}`, {\n                ...(e.photoAppointment && { photoAppointment: iso2b(e.photoAppointment) }),\n                cif: cd.cif,\n                photoUrl: e.pictureUrl\n            });\n\n            alert('✅ Foto guardada');\n            await load();\n            keepOpen(idx);\n        } catch (err) {\n            console.error(err);\n            alert('❌ Error al guardar foto');\n        }\n    };\n\n\n    /* guardar comprobante */\n    const saveReq=async(cd,idx)=>{\n        const e=edit[cd.idCardId];\n        if(!e.requirementId)return alert('requirementId faltante');\n        try{\n            await axios.put(`${API}/requirement/${e.requirementId}`,{\n                paymentProofUrl:e.paymentProofUrl\n            });\n            alert('✅ Comprobante guardado'); await load(); keepOpen(idx);\n        }catch(err){console.error(err);alert('❌ Error al guardar comprobante');}\n    };\n\n    const studentName=stu.length?`${stu[0].names} ${stu[0].surnames}`:'';\n\n    return(\n        <AdminLayout>\n            <div className=\"max-w-4xl mx-auto mt-10 p-6 bg-white rounded shadow\">\n                <h1 className=\"text-2xl font-bold mb-4\">Solicitudes de Carnet de {studentName}</h1>\n                <Link to=\"/admin/students\" className=\"text-blue-600 underline mb-6 block\">\n                    ← Volver a Estudiantes\n                </Link>\n\n                {!cards.length&&<p className=\"text-gray-500\">No hay solicitudes.</p>}\n\n                <div className=\"space-y-4 max-h-[70vh] overflow-y-auto pr-2\">\n                    {cards.map((c,i)=>{\n                        const e=edit[c.idCardId]||{};\n                        return(\n                            <div key={c.idCardId} className=\"border rounded-lg\">\n                                <button onClick={()=>setOpen(open===i?null:i)}\n                                        className=\"w-full p-4 bg-gray-100 flex justify-between\">\n                  <span className=\"font-semibold\">\n                    Semestre {c.semester} {c.year} — {c.status}\n                  </span>\n                                    <span>{open===i?'−':'+'}</span>\n                                </button>\n\n                                {open===i&&(\n                                    <div className=\"p-4 space-y-5 bg-white rounded-b-lg\">\n                                        {/* carnet */}\n                                        <section className=\"space-y-2\">\n                                            <h2 className=\"text-lg font-medium\">Carnet</h2>\n                                            <div className=\"flex gap-2 items-center\">\n                                                <label className=\"w-44 font-semibold\">Estado</label>\n                                                <select value={e.status}\n                                                        onChange={ev=>setEdit({...edit,[c.idCardId]:{...e,status:ev.target.value}})}\n                                                        className=\"border px-2 py-1 rounded\">\n                                                    {STATUS_OPTS.map(s=><option key={s}>{s}</option>)}\n                                                </select>\n                                            </div>\n                                            <div className=\"flex gap-2 items-center\">\n                                                <label className=\"w-44 font-semibold\">Emisión</label>\n                                                <input type=\"date\" className=\"border px-2 py-1 rounded\"\n                                                       value={e.issueDate}\n                                                       onChange={ev=>setEdit({...edit,[c.idCardId]:{...e,issueDate:ev.target.value}})}/>\n                                            </div>\n                                            <div className=\"flex gap-2 items-center\">\n                                                <label className=\"w-44 font-semibold\">Entrega</label>\n                                                <input type=\"datetime-local\" className=\"border px-2 py-1 rounded\"\n                                                       value={e.deliveryAppointment}\n                                                       onChange={ev=>setEdit({...edit,[c.idCardId]:{...e,deliveryAppointment:ev.target.value}})}/>\n                                            </div>\n                                            <div className=\"flex gap-2 items-start\">\n                                                <label className=\"w-44 font-semibold mt-1\">Notas</label>\n                                                <textarea rows={3} className=\"border px-2 py-1 rounded w-full\"\n                                                          value={e.notes}\n                                                          onChange={ev=>setEdit({...edit,[c.idCardId]:{...e,notes:ev.target.value}})}/>\n                                            </div>\n                                            <button onClick={()=>saveCard(c,i)}\n                                                    className=\"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700\">\n                                                Guardar Carnet\n                                            </button>\n                                        </section>\n\n                                        {/* foto */}\n                                        <section className=\"space-y-2 pt-4 border-t\">\n                                            <h2 className=\"text-lg font-medium\">Fotografía</h2>\n                                            <div className=\"flex gap-2 items-center\">\n                                                <label className=\"w-44 font-semibold\">URL</label>\n                                                <input type=\"url\" className=\"border px-2 py-1 rounded w-full\"\n                                                       value={e.pictureUrl}\n                                                       onChange={ev=>setEdit({...edit,[c.idCardId]:{...e,pictureUrl:ev.target.value}})}/>\n                                            </div>\n                                            <div className=\"flex gap-2 items-center\">\n                                                <label className=\"w-44 font-semibold\">Cita Foto</label>\n                                                <input type=\"datetime-local\" className=\"border px-2 py-1 rounded\"\n                                                       value={e.photoAppointment}\n                                                       onChange={ev=>setEdit({...edit,[c.idCardId]:{...e,photoAppointment:ev.target.value}})}/>\n                                            </div>\n                                            <button onClick={()=>savePic(c,i)}\n                                                    className=\"bg-indigo-600 text-white px-3 py-1 rounded hover:bg-indigo-700\">\n                                                Guardar Foto\n                                            </button>\n                                            {e.pictureUrl&&(\n                                                <p className=\"mt-1\">\n                                                    <a href={e.pictureUrl} target=\"_blank\" rel=\"noreferrer\"\n                                                       className=\"text-blue-600 underline\">Ver foto actual</a>\n                                                </p>\n                                            )}\n                                        </section>\n\n                                        {/* comprobante */}\n                                        <section className=\"space-y-2 pt-4 border-t\">\n                                            <h2 className=\"text-lg font-medium\">Comprobante de Pago</h2>\n                                            <div className=\"flex gap-2 items-center\">\n                                                <label className=\"w-44 font-semibold\">URL</label>\n                                                <input type=\"url\" className=\"border px-2 py-1 rounded w-full\"\n                                                       value={e.paymentProofUrl}\n                                                       onChange={ev=>setEdit({...edit,[c.idCardId]:{...e,paymentProofUrl:ev.target.value}})}/>\n                                            </div>\n                                            <button onClick={()=>saveReq(c,i)}\n                                                    className=\"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700\">\n                                                Guardar Comprobante\n                                            </button>\n                                            {e.paymentProofUrl&&(\n                                                <p className=\"mt-1\">\n                                                    <a href={e.paymentProofUrl} target=\"_blank\" rel=\"noreferrer\"\n                                                       className=\"text-blue-600 underline\">Ver comprobante actual</a>\n                                                </p>\n                                            )}\n                                        </section>\n                                    </div>\n                                )}\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        </AdminLayout>\n    );\n}"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,SAAS,EAAEC,IAAI,QAAQ,kBAAkB;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,WAAW,MAAM,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpD,MAAMC,GAAG,GAAG,sCAAsC;AAClD,MAAMC,WAAW,GAAG,CAAC,SAAS,EAAC,UAAU,EAAC,UAAU,EAAC,WAAW,EAAC,SAAS,CAAC;;AAE3E;AACA,MAAMC,SAAS,GAAGC,CAAC,IAAE;EACjB,IAAG,CAACA,CAAC,EAAE,OAAO,EAAE;EAChB,MAAMC,GAAG,GAACD,CAAC,CAACE,KAAK,CAAC,0BAA0B,CAAC;EAC7C,IAAGD,GAAG,EAAE,OAAOA,GAAG,CAAC,CAAC,CAAC,CAACE,OAAO,CAAC,KAAK,EAAC,GAAG,CAAC;EACxC,MAAMC,EAAE,GAACJ,CAAC,CAACE,KAAK,CAAC,gCAAgC,CAAC;EAClD,OAAOE,EAAE,GAAC,GAAGA,EAAE,CAAC,CAAC,CAAC,IAAIA,EAAE,CAAC,CAAC,CAAC,IAAIA,EAAE,CAAC,CAAC,CAAC,EAAE,GAAC,EAAE;AAC7C,CAAC;AACD,MAAMC,KAAK,GAACC,CAAC,IAAEA,CAAC,GAAC,GAAGA,CAAC,CAACC,KAAK,CAAC,CAAC,EAAC,EAAE,CAAC,IAAID,CAAC,CAACC,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,IAAID,CAAC,CAACC,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,IAAID,CAAC,CAACC,KAAK,CAAC,EAAE,CAAC,EAAE,GAAC,EAAE;AACrF,MAAMC,KAAK,GAACF,CAAC,IAAEA,CAAC,GAAC,GAAGA,CAAC,CAACC,KAAK,CAAC,CAAC,EAAC,EAAE,CAAC,IAAID,CAAC,CAACC,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,IAAID,CAAC,CAACC,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,IAAID,CAAC,CAACC,KAAK,CAAC,EAAE,CAAC,EAAE,GAAC,EAAE;AAErF,eAAe,SAASE,iBAAiBA,CAAA,EAAE;EAAAC,EAAA;EACvC,MAAM;IAAEC;EAAI,CAAC,GAAGpB,SAAS,CAAC,CAAC;EAC3B,MAAM,CAACqB,KAAK,EAACC,QAAQ,CAAC,GAACvB,QAAQ,CAAC,EAAE,CAAC;EAAE,MAAM,CAACwB,IAAI,EAACC,OAAO,CAAC,GAACzB,QAAQ,CAAC,EAAE,CAAC;EACtE,MAAM,CAAC0B,GAAG,EAACC,MAAM,CAAC,GAAC3B,QAAQ,CAAC,EAAE,CAAC;EAAK,MAAM,CAAC4B,IAAI,EAACC,OAAO,CAAC,GAAC7B,QAAQ,CAAC,CAAC,CAAC,CAAC;EACrE,MAAM,CAAC8B,IAAI,EAACC,OAAO,CAAC,GAAC/B,QAAQ,CAAC,IAAI,CAAC;;EAEnC;EACA,MAAMgC,IAAI,GAAC,MAAAA,CAAA,KAAS;IAChB,MAAM,CAACC,IAAI,EAACC,IAAI,EAACC,IAAI,CAAC,GAAC,MAAMC,OAAO,CAACC,GAAG,CAAC,CACrClC,KAAK,CAACmC,GAAG,CAAC,GAAG/B,GAAG,SAAS,CAAC,EAC1BJ,KAAK,CAACmC,GAAG,CAAC,GAAG/B,GAAG,cAAc,CAAC,EAC/BJ,KAAK,CAACmC,GAAG,CAAC,GAAG/B,GAAG,UAAU,CAAC,CAC9B,CAAC;IACF,MAAMgC,CAAC,GAACN,IAAI,CAACO,IAAI,CAACC,MAAM,CAACC,CAAC,IAAEA,CAAC,CAACrB,GAAG,KAAGA,GAAG,CAAC;IACxC,MAAMsB,CAAC,GAACT,IAAI,CAACM,IAAI,CAACC,MAAM,CAACC,CAAC,IAAEA,CAAC,CAACrB,GAAG,KAAGA,GAAG,CAAC;IACxCE,QAAQ,CAACgB,CAAC,CAAC;IAAEd,OAAO,CAACkB,CAAC,CAAC;IAAEhB,MAAM,CAACQ,IAAI,CAACK,IAAI,CAACC,MAAM,CAACzB,CAAC,IAAEA,CAAC,CAACK,GAAG,KAAGA,GAAG,CAAC,CAAC;IAEjE,MAAMuB,EAAE,GAAC,CAAC,CAAC;IACXL,CAAC,CAACM,OAAO,CAACC,EAAE,IAAE;MACV,MAAMC,GAAG,GAACJ,CAAC,CAACK,IAAI,CAACC,CAAC,IAAEA,CAAC,CAACC,aAAa,KAAGJ,EAAE,CAACK,cAAc,CAAC;MACxDP,EAAE,CAACE,EAAE,CAACM,QAAQ,CAAC,GAAC;QACZC,MAAM,EAACP,EAAE,CAACO,MAAM;QAChBC,KAAK,EAAER,EAAE,CAACQ,KAAK,IAAE,EAAE;QACnBC,SAAS,EAAE9C,SAAS,CAACqC,EAAE,CAACS,SAAS,CAAC;QAAW;QAC7CC,mBAAmB,EAAEzC,KAAK,CAAC+B,EAAE,CAACU,mBAAmB,CAAC;QAClDC,SAAS,EAAEX,EAAE,CAACY,UAAU;QACxBC,UAAU,EAAEb,EAAE,CAACc,WAAW,IAAE,EAAE;QAC9BC,gBAAgB,EAAE9C,KAAK,CAAC+B,EAAE,CAACe,gBAAgB,CAAC;QAC5CX,aAAa,EAAEH,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEG,aAAa;QACjCY,eAAe,EAAE,CAAAf,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEe,eAAe,KAAE;MAC3C,CAAC;IACL,CAAC,CAAC;IACFjC,OAAO,CAACe,EAAE,CAAC;EACf,CAAC;EACD7C,SAAS,CAAC,MAAI;IAACiC,IAAI,CAAC,CAAC;EAAC,CAAC,EAAC,CAACX,GAAG,CAAC,CAAC;EAE9B,MAAM0C,QAAQ,GAACrB,CAAC,IAAEX,OAAO,CAACW,CAAC,CAAC;;EAE5B;EACA,MAAMsB,QAAQ,GAAC,MAAAA,CAAMlB,EAAE,EAACmB,GAAG,KAAG;IAC1B,MAAMC,CAAC,GAACtC,IAAI,CAACkB,EAAE,CAACM,QAAQ,CAAC;IACzB,IAAG;MACC,MAAMe,KAAK,GAAC,CAAC,CAAC;MACd,IAAGD,CAAC,CAACX,SAAS,IAAIW,CAAC,CAACX,SAAS,KAAG9C,SAAS,CAACqC,EAAE,CAACS,SAAS,CAAC,EACnDY,KAAK,CAACZ,SAAS,GAACW,CAAC,CAACX,SAAS,CAAC,CAAwB;MACxD,IAAGW,CAAC,CAACV,mBAAmB,IACpBtC,KAAK,CAACgD,CAAC,CAACV,mBAAmB,CAAC,KAAGV,EAAE,CAACU,mBAAmB,EACrDW,KAAK,CAACX,mBAAmB,GAACtC,KAAK,CAACgD,CAAC,CAACV,mBAAmB,CAAC;MAC1D,IAAGY,MAAM,CAACC,IAAI,CAACF,KAAK,CAAC,CAACG,MAAM,EACxB,MAAMnE,KAAK,CAACoE,KAAK,CAAC,GAAGhE,GAAG,WAAWuC,EAAE,CAACM,QAAQ,QAAQ,EAACe,KAAK,CAAC;MAEjE,IAAGD,CAAC,CAACb,MAAM,KAAGP,EAAE,CAACO,MAAM,EACnB,MAAMlD,KAAK,CAACoE,KAAK,CAAC,GAAGhE,GAAG,WAAWuC,EAAE,CAACM,QAAQ,SAAS,EAAC;QAACC,MAAM,EAACa,CAAC,CAACb;MAAM,CAAC,CAAC;MAE9E,MAAMmB,IAAI,GAAC,CAACN,CAAC,CAACZ,KAAK,IAAE,EAAE,EAAEmB,IAAI,CAAC,CAAC;MAC/B,IAAGD,IAAI,IAAIA,IAAI,KAAI,CAAC1B,EAAE,CAACQ,KAAK,IAAE,EAAE,EAAEmB,IAAI,CAAC,CAAC,EACpC,MAAMtE,KAAK,CAACoE,KAAK,CAAC,GAAGhE,GAAG,WAAWuC,EAAE,CAACM,QAAQ,WAAW,EAAC;QAACE,KAAK,EAACkB;MAAI,CAAC,CAAC;MAE3EE,KAAK,CAAC,sBAAsB,CAAC;MAC7B,MAAM1C,IAAI,CAAC,CAAC;MAAE+B,QAAQ,CAACE,GAAG,CAAC;IAC/B,CAAC,QAAMU,GAAG,EAAC;MAACC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;MAACD,KAAK,CAAC,2BAA2B,CAAC;IAAC;EACtE,CAAC;;EAED;EACA,MAAMI,OAAO,GAAG,MAAAA,CAAOhC,EAAE,EAAEmB,GAAG,KAAK;IAC/B,MAAMC,CAAC,GAAGtC,IAAI,CAACkB,EAAE,CAACM,QAAQ,CAAC;IAC3B,IAAI,CAACc,CAAC,CAAChB,aAAa,EAAE;MAClB,OAAOwB,KAAK,CAAC,wBAAwB,CAAC;IAC1C;IACA,IAAI;MAAA,IAAAK,iBAAA;MACA;MACA,MAAMC,MAAM,GAAG,MAAM7E,KAAK,CAACmC,GAAG,CAAC,GAAG/B,GAAG,gBAAgB2D,CAAC,CAAChB,aAAa,EAAE,CAAC;MACvE,MAAM+B,MAAM,IAAAF,iBAAA,GAAGC,MAAM,CAACxC,IAAI,CAACA,IAAI,cAAAuC,iBAAA,cAAAA,iBAAA,GAAIC,MAAM,CAACxC,IAAI;MAC9C,MAAM0C,KAAK,GAAID,MAAM,CAACxB,SAAS;MAC/B,IAAI,CAACyB,KAAK,EAAE;QACR,OAAOR,KAAK,CAAC,2CAA2C,CAAC;MAC7D;;MAEA;MACA,MAAMvE,KAAK,CAACgF,GAAG,CAAC,GAAG5E,GAAG,YAAY2E,KAAK,EAAE,EAAE;QACvC,IAAIhB,CAAC,CAACL,gBAAgB,IAAI;UAAEA,gBAAgB,EAAE3C,KAAK,CAACgD,CAAC,CAACL,gBAAgB;QAAE,CAAC,CAAC;QAC1ExC,GAAG,EAAEyB,EAAE,CAACzB,GAAG;QACX+D,QAAQ,EAAElB,CAAC,CAACP;MAChB,CAAC,CAAC;MAEFe,KAAK,CAAC,iBAAiB,CAAC;MACxB,MAAM1C,IAAI,CAAC,CAAC;MACZ+B,QAAQ,CAACE,GAAG,CAAC;IACjB,CAAC,CAAC,OAAOU,GAAG,EAAE;MACVC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;MAClBD,KAAK,CAAC,yBAAyB,CAAC;IACpC;EACJ,CAAC;;EAGD;EACA,MAAMW,OAAO,GAAC,MAAAA,CAAMvC,EAAE,EAACmB,GAAG,KAAG;IACzB,MAAMC,CAAC,GAACtC,IAAI,CAACkB,EAAE,CAACM,QAAQ,CAAC;IACzB,IAAG,CAACc,CAAC,CAAChB,aAAa,EAAC,OAAOwB,KAAK,CAAC,wBAAwB,CAAC;IAC1D,IAAG;MACC,MAAMvE,KAAK,CAACgF,GAAG,CAAC,GAAG5E,GAAG,gBAAgB2D,CAAC,CAAChB,aAAa,EAAE,EAAC;QACpDY,eAAe,EAACI,CAAC,CAACJ;MACtB,CAAC,CAAC;MACFY,KAAK,CAAC,wBAAwB,CAAC;MAAE,MAAM1C,IAAI,CAAC,CAAC;MAAE+B,QAAQ,CAACE,GAAG,CAAC;IAChE,CAAC,QAAMU,GAAG,EAAC;MAACC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;MAACD,KAAK,CAAC,gCAAgC,CAAC;IAAC;EAC3E,CAAC;EAED,MAAMY,WAAW,GAAC5D,GAAG,CAAC4C,MAAM,GAAC,GAAG5C,GAAG,CAAC,CAAC,CAAC,CAAC6D,KAAK,IAAI7D,GAAG,CAAC,CAAC,CAAC,CAAC8D,QAAQ,EAAE,GAAC,EAAE;EAEpE,oBACIlF,OAAA,CAACF,WAAW;IAAAqF,QAAA,eACRnF,OAAA;MAAKoF,SAAS,EAAC,qDAAqD;MAAAD,QAAA,gBAChEnF,OAAA;QAAIoF,SAAS,EAAC,yBAAyB;QAAAD,QAAA,GAAC,2BAAyB,EAACH,WAAW;MAAA;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACnFxF,OAAA,CAACJ,IAAI;QAAC6F,EAAE,EAAC,iBAAiB;QAACL,SAAS,EAAC,oCAAoC;QAAAD,QAAA,EAAC;MAE1E;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,EAEN,CAACxE,KAAK,CAACgD,MAAM,iBAAEhE,OAAA;QAAGoF,SAAS,EAAC,eAAe;QAAAD,QAAA,EAAC;MAAmB;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAEpExF,OAAA;QAAKoF,SAAS,EAAC,6CAA6C;QAAAD,QAAA,EACvDnE,KAAK,CAAC0E,GAAG,CAAC,CAACzD,CAAC,EAACG,CAAC,KAAG;UACd,MAAMwB,CAAC,GAACtC,IAAI,CAACW,CAAC,CAACa,QAAQ,CAAC,IAAE,CAAC,CAAC;UAC5B,oBACI9C,OAAA;YAAsBoF,SAAS,EAAC,mBAAmB;YAAAD,QAAA,gBAC/CnF,OAAA;cAAQ2F,OAAO,EAAEA,CAAA,KAAIlE,OAAO,CAACD,IAAI,KAAGY,CAAC,GAAC,IAAI,GAACA,CAAC,CAAE;cACtCgD,SAAS,EAAC,6CAA6C;cAAAD,QAAA,gBAC7EnF,OAAA;gBAAMoF,SAAS,EAAC,eAAe;gBAAAD,QAAA,GAAC,WACrB,EAAClD,CAAC,CAAC2D,QAAQ,EAAC,GAAC,EAAC3D,CAAC,CAAC4D,IAAI,EAAC,UAAG,EAAC5D,CAAC,CAACc,MAAM;cAAA;gBAAAsC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACtC,CAAC,eACWxF,OAAA;gBAAAmF,QAAA,EAAO3D,IAAI,KAAGY,CAAC,GAAC,GAAG,GAAC;cAAG;gBAAAiD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC3B,CAAC,EAERhE,IAAI,KAAGY,CAAC,iBACLpC,OAAA;cAAKoF,SAAS,EAAC,qCAAqC;cAAAD,QAAA,gBAEhDnF,OAAA;gBAASoF,SAAS,EAAC,WAAW;gBAAAD,QAAA,gBAC1BnF,OAAA;kBAAIoF,SAAS,EAAC,qBAAqB;kBAAAD,QAAA,EAAC;gBAAM;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAC/CxF,OAAA;kBAAKoF,SAAS,EAAC,yBAAyB;kBAAAD,QAAA,gBACpCnF,OAAA;oBAAOoF,SAAS,EAAC,oBAAoB;oBAAAD,QAAA,EAAC;kBAAM;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACpDxF,OAAA;oBAAQ8F,KAAK,EAAElC,CAAC,CAACb,MAAO;oBAChBgD,QAAQ,EAAEC,EAAE,IAAEzE,OAAO,CAAC;sBAAC,GAAGD,IAAI;sBAAC,CAACW,CAAC,CAACa,QAAQ,GAAE;wBAAC,GAAGc,CAAC;wBAACb,MAAM,EAACiD,EAAE,CAACC,MAAM,CAACH;sBAAK;oBAAC,CAAC,CAAE;oBAC5EV,SAAS,EAAC,0BAA0B;oBAAAD,QAAA,EACvCjF,WAAW,CAACwF,GAAG,CAAChF,CAAC,iBAAEV,OAAA;sBAAAmF,QAAA,EAAiBzE;oBAAC,GAALA,CAAC;sBAAA2E,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAa,CAAC;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC7C,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACR,CAAC,eACNxF,OAAA;kBAAKoF,SAAS,EAAC,yBAAyB;kBAAAD,QAAA,gBACpCnF,OAAA;oBAAOoF,SAAS,EAAC,oBAAoB;oBAAAD,QAAA,EAAC;kBAAO;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACrDxF,OAAA;oBAAOkG,IAAI,EAAC,MAAM;oBAACd,SAAS,EAAC,0BAA0B;oBAChDU,KAAK,EAAElC,CAAC,CAACX,SAAU;oBACnB8C,QAAQ,EAAEC,EAAE,IAAEzE,OAAO,CAAC;sBAAC,GAAGD,IAAI;sBAAC,CAACW,CAAC,CAACa,QAAQ,GAAE;wBAAC,GAAGc,CAAC;wBAACX,SAAS,EAAC+C,EAAE,CAACC,MAAM,CAACH;sBAAK;oBAAC,CAAC;kBAAE;oBAAAT,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvF,CAAC,eACNxF,OAAA;kBAAKoF,SAAS,EAAC,yBAAyB;kBAAAD,QAAA,gBACpCnF,OAAA;oBAAOoF,SAAS,EAAC,oBAAoB;oBAAAD,QAAA,EAAC;kBAAO;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACrDxF,OAAA;oBAAOkG,IAAI,EAAC,gBAAgB;oBAACd,SAAS,EAAC,0BAA0B;oBAC1DU,KAAK,EAAElC,CAAC,CAACV,mBAAoB;oBAC7B6C,QAAQ,EAAEC,EAAE,IAAEzE,OAAO,CAAC;sBAAC,GAAGD,IAAI;sBAAC,CAACW,CAAC,CAACa,QAAQ,GAAE;wBAAC,GAAGc,CAAC;wBAACV,mBAAmB,EAAC8C,EAAE,CAACC,MAAM,CAACH;sBAAK;oBAAC,CAAC;kBAAE;oBAAAT,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACjG,CAAC,eACNxF,OAAA;kBAAKoF,SAAS,EAAC,wBAAwB;kBAAAD,QAAA,gBACnCnF,OAAA;oBAAOoF,SAAS,EAAC,yBAAyB;oBAAAD,QAAA,EAAC;kBAAK;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACxDxF,OAAA;oBAAUmG,IAAI,EAAE,CAAE;oBAACf,SAAS,EAAC,iCAAiC;oBACpDU,KAAK,EAAElC,CAAC,CAACZ,KAAM;oBACf+C,QAAQ,EAAEC,EAAE,IAAEzE,OAAO,CAAC;sBAAC,GAAGD,IAAI;sBAAC,CAACW,CAAC,CAACa,QAAQ,GAAE;wBAAC,GAAGc,CAAC;wBAACZ,KAAK,EAACgD,EAAE,CAACC,MAAM,CAACH;sBAAK;oBAAC,CAAC;kBAAE;oBAAAT,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACtF,CAAC,eACNxF,OAAA;kBAAQ2F,OAAO,EAAEA,CAAA,KAAIjC,QAAQ,CAACzB,CAAC,EAACG,CAAC,CAAE;kBAC3BgD,SAAS,EAAC,4DAA4D;kBAAAD,QAAA,EAAC;gBAE/E;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ,CAAC,eAGVxF,OAAA;gBAASoF,SAAS,EAAC,yBAAyB;gBAAAD,QAAA,gBACxCnF,OAAA;kBAAIoF,SAAS,EAAC,qBAAqB;kBAAAD,QAAA,EAAC;gBAAU;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACnDxF,OAAA;kBAAKoF,SAAS,EAAC,yBAAyB;kBAAAD,QAAA,gBACpCnF,OAAA;oBAAOoF,SAAS,EAAC,oBAAoB;oBAAAD,QAAA,EAAC;kBAAG;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACjDxF,OAAA;oBAAOkG,IAAI,EAAC,KAAK;oBAACd,SAAS,EAAC,iCAAiC;oBACtDU,KAAK,EAAElC,CAAC,CAACP,UAAW;oBACpB0C,QAAQ,EAAEC,EAAE,IAAEzE,OAAO,CAAC;sBAAC,GAAGD,IAAI;sBAAC,CAACW,CAAC,CAACa,QAAQ,GAAE;wBAAC,GAAGc,CAAC;wBAACP,UAAU,EAAC2C,EAAE,CAACC,MAAM,CAACH;sBAAK;oBAAC,CAAC;kBAAE;oBAAAT,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACxF,CAAC,eACNxF,OAAA;kBAAKoF,SAAS,EAAC,yBAAyB;kBAAAD,QAAA,gBACpCnF,OAAA;oBAAOoF,SAAS,EAAC,oBAAoB;oBAAAD,QAAA,EAAC;kBAAS;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACvDxF,OAAA;oBAAOkG,IAAI,EAAC,gBAAgB;oBAACd,SAAS,EAAC,0BAA0B;oBAC1DU,KAAK,EAAElC,CAAC,CAACL,gBAAiB;oBAC1BwC,QAAQ,EAAEC,EAAE,IAAEzE,OAAO,CAAC;sBAAC,GAAGD,IAAI;sBAAC,CAACW,CAAC,CAACa,QAAQ,GAAE;wBAAC,GAAGc,CAAC;wBAACL,gBAAgB,EAACyC,EAAE,CAACC,MAAM,CAACH;sBAAK;oBAAC,CAAC;kBAAE;oBAAAT,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC9F,CAAC,eACNxF,OAAA;kBAAQ2F,OAAO,EAAEA,CAAA,KAAInB,OAAO,CAACvC,CAAC,EAACG,CAAC,CAAE;kBAC1BgD,SAAS,EAAC,gEAAgE;kBAAAD,QAAA,EAAC;gBAEnF;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,EACR5B,CAAC,CAACP,UAAU,iBACTrD,OAAA;kBAAGoF,SAAS,EAAC,MAAM;kBAAAD,QAAA,eACfnF,OAAA;oBAAGoG,IAAI,EAAExC,CAAC,CAACP,UAAW;oBAAC4C,MAAM,EAAC,QAAQ;oBAACI,GAAG,EAAC,YAAY;oBACpDjB,SAAS,EAAC,yBAAyB;oBAAAD,QAAA,EAAC;kBAAe;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC3D,CACN;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACI,CAAC,eAGVxF,OAAA;gBAASoF,SAAS,EAAC,yBAAyB;gBAAAD,QAAA,gBACxCnF,OAAA;kBAAIoF,SAAS,EAAC,qBAAqB;kBAAAD,QAAA,EAAC;gBAAmB;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAC5DxF,OAAA;kBAAKoF,SAAS,EAAC,yBAAyB;kBAAAD,QAAA,gBACpCnF,OAAA;oBAAOoF,SAAS,EAAC,oBAAoB;oBAAAD,QAAA,EAAC;kBAAG;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACjDxF,OAAA;oBAAOkG,IAAI,EAAC,KAAK;oBAACd,SAAS,EAAC,iCAAiC;oBACtDU,KAAK,EAAElC,CAAC,CAACJ,eAAgB;oBACzBuC,QAAQ,EAAEC,EAAE,IAAEzE,OAAO,CAAC;sBAAC,GAAGD,IAAI;sBAAC,CAACW,CAAC,CAACa,QAAQ,GAAE;wBAAC,GAAGc,CAAC;wBAACJ,eAAe,EAACwC,EAAE,CAACC,MAAM,CAACH;sBAAK;oBAAC,CAAC;kBAAE;oBAAAT,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC7F,CAAC,eACNxF,OAAA;kBAAQ2F,OAAO,EAAEA,CAAA,KAAIZ,OAAO,CAAC9C,CAAC,EAACG,CAAC,CAAE;kBAC1BgD,SAAS,EAAC,8DAA8D;kBAAAD,QAAA,EAAC;gBAEjF;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,EACR5B,CAAC,CAACJ,eAAe,iBACdxD,OAAA;kBAAGoF,SAAS,EAAC,MAAM;kBAAAD,QAAA,eACfnF,OAAA;oBAAGoG,IAAI,EAAExC,CAAC,CAACJ,eAAgB;oBAACyC,MAAM,EAAC,QAAQ;oBAACI,GAAG,EAAC,YAAY;oBACzDjB,SAAS,EAAC,yBAAyB;oBAAAD,QAAA,EAAC;kBAAsB;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAClE,CACN;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACT,CACR;UAAA,GA9FKvD,CAAC,CAACa,QAAQ;YAAAuC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OA+Ff,CAAC;QAEd,CAAC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACG,CAAC;AAEtB;AAAC1E,EAAA,CAjOuBD,iBAAiB;EAAA,QACrBlB,SAAS;AAAA;AAAA2G,EAAA,GADLzF,iBAAiB;AAAA,IAAAyF,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}